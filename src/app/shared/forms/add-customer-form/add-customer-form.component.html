<div class="fixed z-50 inset-0 flex items-center justify-center bg-black/65">
    <div class="bg-white p-6 rounded-xl shadow-2xl w-[90%] sm:w-[70%] lg:w-[55%] h-[90%] overflow-y-auto">
        <!-- Title -->
        <h2 class="text-2xl font-semibold text-gray-700 mb-4 border-b pb-2"> Add New Customer </h2>
        <form [formGroup]="form">

        <!-- Firstname & Lastname-->
        <div class="mb-6">
            <h3 class="text-lg font-semibold text-gray-600 mb-3">Customer Information</h3>
            <div class="flex flex-wrap gap-2">
                <div class="flex-1 min-w-[200px]">
                    <label class="block text-sm font-medium text-gray-600 mb-2">First Name</label>
                    <input  placeholder="Enter Customer's First Name"
                            class="p-3 border rounded w-full focus:border-[#6B7C9D] focus:ring-3 focus:ring-[#6B7C9D] focus:outline-none"
                            formControlName="firstName">
                    <p class="text-red-500 text-sm mt-1" *ngIf="form.controls['firstName'].invalid && form.controls['firstName'].touched">
                    Please Enter Customer's First Name
                    </p>
                </div>

                <div class="flex-1 min-w-[200px]">
                    <label class="block text-sm font-medium text-gray-600 mb-2">Father Name</label>
                    <input  placeholder="Enter Customer's Father Name"
                            class="p-3 border rounded w-full focus:border-[#6B7C9D] focus:ring-3 focus:ring-[#6B7C9D] focus:outline-none"
                            formControlName="fatherName">
                </div>

                <div class="flex-1 min-w-[200px]">
                    <label class="block text-sm font-medium text-gray-600 mb-2">Last Name</label>
                    <input  placeholder="Enter Customer's Last Name"
                            class="p-3 border rounded w-full focus:border-[#6B7C9D] focus:ring-3 focus:ring-[#6B7C9D] focus:outline-none"
                            formControlName="lastName">
                    <p class="text-red-500 text-sm mt-1" *ngIf="form.controls['lastName'].invalid && form.controls['lastName'].touched">
                    Please Enter Customer's Last Name
                    </p>
                </div>
            </div>
        </div>
        <!-- Phone Number -->
        <div class="mb-6">
            <div class="flex flex-wrap gap-4">
                <div class="flex-1 min-w-[250px]">
                    <label class="block text-sm font-medium text-gray-600 mb-2">Phone Number</label>
                    <ngx-intl-tel-input
                    [enableAutoCountrySelect]="false"
                    [preferredCountries]="preferredCountries"
                    [enablePlaceholder]="true"
                    [enableAutoCountrySelect]="true"
                    [searchCountryFlag]="true"
                    [maxLength]="15"
                    [phoneValidation]="true"
                    [separateDialCode]="separateDialCode"
                    [selectedCountryISO]="CountryISO.Lebanon"
                    formControlName="phoneNumber"
                >
                    </ngx-intl-tel-input>
                    <p class="text-red-500 text-sm mt-1" *ngIf="form.controls['phoneNumber'].invalid && form.controls['phoneNumber'].touched">
                    Please Enter Customer's Phone Number or a Valid Number
                    </p>
                </div>
            </div>
            @if(form.controls['phoneNumber'].value){
                <p class="text-sm font-semibold text-gray-600 my-3">               
                    Customer Phone Number: {{ form.controls['phoneNumber'].value?.nationalNumber }}
                </p>
            }
        </div>
        <!-- Gender -->
        <div class="mb-6 flex gap-4">
            <!-- Male Radio Button -->
            <label class="flex items-center gap-2 cursor-pointer">
                <input type="radio" formControlName="theGender" value="Male" class="hidden" />
                <span class="w-5 h-5 border-2 border-gray-700 rounded-full flex items-center justify-center">
                <span
                   *ngIf="form.get('theGender')?.value === 'Male'"
                    class="w-3 h-3 bg-gray-700 rounded-full"
                ></span>
            </span>
            Male
            </label>

            <!-- Female Radio Button -->
            <label class="flex items-center gap-2 cursor-pointer">
                <input type="radio" formControlName="theGender" value="Female" class="hidden"  />
                <span class="w-5 h-5 border-2 border-gray-700 rounded-full flex items-center justify-center">
                <span
                    *ngIf="form.get('theGender')?.value === 'Female'"
                    class="w-3 h-3 bg-gray-700 rounded-full"
                ></span>
            </span>
            Female
            </label>
        </div>
        <!-- Address -->
        <div class="mb-6">
            <h3 class="text-lg font-semibold text-gray-600 mb-3">Customer Address</h3>

            <div class="flex flex-wrap gap-4">
                <!-- Country -->
                <div class="flex-1 min-w-[250px]">
                    <label class="block text-sm font-medium text-gray-600 mb-2">Country</label>
                    <select class="p-3 border rounded w-full focus:border-[#6B7C9D] focus:ring-3 focus:ring-[#6B7C9D] focus:outline-none"
                            formControlName="country">
                    <option value="" disabled selected>Select a country</option>
                    <option *ngFor="let country of countries" [value]="country.id">
                        {{ country.name }}
                    </option>
                    <option>+ Add New Country</option>
                    </select>
                    <p class="text-red-500 text-sm mt-1" *ngIf="form.controls['country'].invalid && form.controls['country'].touched">
                    Please select a country.
                    </p>
                </div>
                <!-- City -->
                <div class="flex-1 min-w-[250px]">
                    <label class="block text-sm font-medium text-gray-600 mb-2">City</label>
                    <select class="p-3 border rounded w-full focus:border-[#6B7C9D] focus:ring-3 focus:ring-[#6B7C9D] focus:outline-none"
                            formControlName="city">
                    <option value="" disabled selected>Select a City</option>
                    <option *ngFor="let city of cities" [value]="city.id">
                        {{ city.name }}
                    </option>
                    <option>+ Add New City</option>
                    </select>
                    <p class="text-red-500 text-sm mt-1" *ngIf="form.controls['city'].invalid && form.controls['city'].touched">
                    Please select a city.
                    </p>
                </div>
            </div>

            <div class="flex flex-wrap gap-4 my-4">
                <!-- District -->
                <div class="flex-1 min-w-[250px]">
                    <label class="block text-sm font-medium text-gray-600 mb-2">District</label>
                    <select class="p-3 border rounded w-full focus:border-[#6B7C9D] focus:ring-3 focus:ring-[#6B7C9D] focus:outline-none"
                            formControlName="District">
                    <option value="" disabled selected>Select a District</option>
                    <option *ngFor="let District of districts" [value]="District.id">
                        {{ District.name }}
                    </option>
                    <option>+ Add New District</option>
                    </select>
                    <p class="text-red-500 text-sm mt-1" *ngIf="form.controls['District'].invalid && form.controls['District'].touched">
                    Please select a District.
                    </p>
                </div>
                <!-- Street -->
                <div class="flex-1 min-w-[250px]">
                    <label class="block text-sm font-medium text-gray-600 mb-2">Street</label>
                    <select class="p-3 border rounded w-full focus:border-[#6B7C9D] focus:ring-3 focus:ring-[#6B7C9D] focus:outline-none"
                            formControlName="street">
                    <option value="" disabled selected>Select a Street</option>
                    <option *ngFor="let street of streets" [value]="street.id">
                        {{ street.name }}
                    </option>
                    <option>+ Add New Street</option>
                    </select>
                    <p class="text-red-500 text-sm mt-1" *ngIf="form.controls['street'].invalid && form.controls['street'].touched">
                    Please select a Street.
                    </p>
                </div>
            </div>
        </div>

        <!-- Submit & Cancle -->
        <div class="flex justify-end mt-6 gap-4">
            <button (click)="submit()"
                    class="p-3 bg-green-500 text-white rounded-lg font-semibold hover:bg-green-600 transition">
                Submit
            </button>
            <button (click)="closeFormAndDestroy()"
                    class="p-3 bg-red-500 text-white rounded-lg font-semibold hover:bg-red-600 transition">
                Cancel
            </button>
        </div>

        </form>
    </div>
</div>